/* gap-lint v1.0.0, Manuel Martins - Generated on 26-10-2016 */
function PredictionContext(cachedHashString){this.cachedHashString=cachedHashString}function calculateHashString(parent,returnState){return""+parent+returnState}function calculateEmptyHashString(){return""}function PredictionContextCache(){return this.cache={},this}function SingletonPredictionContext(parent,returnState){var hashString=null!==parent?calculateHashString(parent,returnState):calculateEmptyHashString();PredictionContext.call(this,hashString),this.parentCtx=parent,this.returnState=returnState}function EmptyPredictionContext(){return SingletonPredictionContext.call(this,null,PredictionContext.EMPTY_RETURN_STATE),this}function ArrayPredictionContext(parents,returnStates){var hash=calculateHashString(parents,returnStates);return PredictionContext.call(this,hash),this.parents=parents,this.returnStates=returnStates,this}function predictionContextFromRuleContext(atn,outerContext){if(void 0!==outerContext&&null!==outerContext||(outerContext=RuleContext.EMPTY),null===outerContext.parentCtx||outerContext===RuleContext.EMPTY)return PredictionContext.EMPTY;var parent=predictionContextFromRuleContext(atn,outerContext.parentCtx),state=atn.states[outerContext.invokingState],transition=state.transitions[0];return SingletonPredictionContext.create(parent,transition.followState.stateNumber)}function calculateListsHashString(parents,returnStates){var s="";return parents.map(function(p){s+=p}),returnStates.map(function(r){s+=r}),s}function merge(a,b,rootIsWildcard,mergeCache){if(a===b)return a;if(a instanceof SingletonPredictionContext&&b instanceof SingletonPredictionContext)return mergeSingletons(a,b,rootIsWildcard,mergeCache);if(rootIsWildcard){if(a instanceof EmptyPredictionContext)return a;if(b instanceof EmptyPredictionContext)return b}return a instanceof SingletonPredictionContext&&(a=new ArrayPredictionContext([a.getParent()],[a.returnState])),b instanceof SingletonPredictionContext&&(b=new ArrayPredictionContext([b.getParent()],[b.returnState])),mergeArrays(a,b,rootIsWildcard,mergeCache)}function mergeSingletons(a,b,rootIsWildcard,mergeCache){if(null!==mergeCache){var previous=mergeCache.get(a,b);if(null!==previous)return previous;if(previous=mergeCache.get(b,a),null!==previous)return previous}var rootMerge=mergeRoot(a,b,rootIsWildcard);if(null!==rootMerge)return null!==mergeCache&&mergeCache.set(a,b,rootMerge),rootMerge;if(a.returnState===b.returnState){var parent=merge(a.parentCtx,b.parentCtx,rootIsWildcard,mergeCache);if(parent===a.parentCtx)return a;if(parent===b.parentCtx)return b;var spc=SingletonPredictionContext.create(parent,a.returnState);return null!==mergeCache&&mergeCache.set(a,b,spc),spc}var singleParent=null;if((a===b||null!==a.parentCtx&&a.parentCtx===b.parentCtx)&&(singleParent=a.parentCtx),null!==singleParent){var payloads=[a.returnState,b.returnState];a.returnState>b.returnState&&(payloads[0]=b.returnState,payloads[1]=a.returnState);var parents=[singleParent,singleParent],apc=new ArrayPredictionContext(parents,payloads);return null!==mergeCache&&mergeCache.set(a,b,apc),apc}var payloads=[a.returnState,b.returnState],parents=[a.parentCtx,b.parentCtx];a.returnState>b.returnState&&(payloads[0]=b.returnState,payloads[1]=a.returnState,parents=[b.parentCtx,a.parentCtx]);var a_=new ArrayPredictionContext(parents,payloads);return null!==mergeCache&&mergeCache.set(a,b,a_),a_}function mergeRoot(a,b,rootIsWildcard){if(rootIsWildcard){if(a===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(b===PredictionContext.EMPTY)return PredictionContext.EMPTY}else{if(a===PredictionContext.EMPTY&&b===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(a===PredictionContext.EMPTY){var payloads=[b.returnState,PredictionContext.EMPTY_RETURN_STATE],parents=[b.parentCtx,null];return new ArrayPredictionContext(parents,payloads)}if(b===PredictionContext.EMPTY){var payloads=[a.returnState,PredictionContext.EMPTY_RETURN_STATE],parents=[a.parentCtx,null];return new ArrayPredictionContext(parents,payloads)}}return null}function mergeArrays(a,b,rootIsWildcard,mergeCache){if(null!==mergeCache){var previous=mergeCache.get(a,b);if(null!==previous)return previous;if(previous=mergeCache.get(b,a),null!==previous)return previous}for(var i=0,j=0,k=0,mergedReturnStates=[],mergedParents=[];i<a.returnStates.length&&j<b.returnStates.length;){var a_parent=a.parents[i],b_parent=b.parents[j];if(a.returnStates[i]===b.returnStates[j]){var payload=a.returnStates[i],bothDollars=payload===PredictionContext.EMPTY_RETURN_STATE&&null===a_parent&&null===b_parent,ax_ax=null!==a_parent&&null!==b_parent&&a_parent===b_parent;if(bothDollars||ax_ax)mergedParents[k]=a_parent,mergedReturnStates[k]=payload;else{var mergedParent=merge(a_parent,b_parent,rootIsWildcard,mergeCache);mergedParents[k]=mergedParent,mergedReturnStates[k]=payload}i+=1,j+=1}else a.returnStates[i]<b.returnStates[j]?(mergedParents[k]=a_parent,mergedReturnStates[k]=a.returnStates[i],i+=1):(mergedParents[k]=b_parent,mergedReturnStates[k]=b.returnStates[j],j+=1);k+=1}if(i<a.returnStates.length)for(var p=i;p<a.returnStates.length;p++)mergedParents[k]=a.parents[p],mergedReturnStates[k]=a.returnStates[p],k+=1;else for(var p=j;p<b.returnStates.length;p++)mergedParents[k]=b.parents[p],mergedReturnStates[k]=b.returnStates[p],k+=1;if(k<mergedParents.length){if(1===k){var a_=SingletonPredictionContext.create(mergedParents[0],mergedReturnStates[0]);return null!==mergeCache&&mergeCache.set(a,b,a_),a_}mergedParents=mergedParents.slice(0,k),mergedReturnStates=mergedReturnStates.slice(0,k)}var M=new ArrayPredictionContext(mergedParents,mergedReturnStates);return M===a?(null!==mergeCache&&mergeCache.set(a,b,a),a):M===b?(null!==mergeCache&&mergeCache.set(a,b,b),b):(combineCommonParents(mergedParents),null!==mergeCache&&mergeCache.set(a,b,M),M)}function combineCommonParents(parents){for(var uniqueParents={},p=0;p<parents.length;p++){var parent=parents[p];parent in uniqueParents||(uniqueParents[parent]=parent)}for(var q=0;q<parents.length;q++)parents[q]=uniqueParents[parents[q]]}function getCachedPredictionContext(context,contextCache,visited){if(context.isEmpty())return context;var existing=visited[context]||null;if(null!==existing)return existing;if(existing=contextCache.get(context),null!==existing)return visited[context]=existing,existing;for(var changed=!1,parents=[],i=0;i<parents.length;i++){var parent=getCachedPredictionContext(context.getParent(i),contextCache,visited);if(changed||parent!==context.getParent(i)){if(!changed){parents=[];for(var j=0;j<context.length;j++)parents[j]=context.getParent(j);changed=!0}parents[i]=parent}}if(!changed)return contextCache.add(context),visited[context]=context,context;var updated=null;return updated=0===parents.length?PredictionContext.EMPTY:1===parents.length?SingletonPredictionContext.create(parents[0],context.getReturnState(0)):new ArrayPredictionContext(parents,context.returnStates),contextCache.add(updated),visited[updated]=updated,visited[context]=updated,updated}function getAllContextNodes(context,nodes,visited){if(null===nodes)return nodes=[],getAllContextNodes(context,nodes,visited);if(null===visited)return visited={},getAllContextNodes(context,nodes,visited);if(null===context||null!==visited[context])return nodes;visited[context]=context,nodes.push(context);for(var i=0;i<context.length;i++)getAllContextNodes(context.getParent(i),nodes,visited);return nodes}var RuleContext=require("./RuleContext").RuleContext;PredictionContext.EMPTY=null,PredictionContext.EMPTY_RETURN_STATE=2147483647,PredictionContext.globalNodeCount=1,PredictionContext.id=PredictionContext.globalNodeCount,PredictionContext.prototype.isEmpty=function(){return this===PredictionContext.EMPTY},PredictionContext.prototype.hasEmptyPath=function(){return this.getReturnState(this.length-1)===PredictionContext.EMPTY_RETURN_STATE},PredictionContext.prototype.hashString=function(){return this.cachedHashString},PredictionContextCache.prototype.add=function(ctx){if(ctx===PredictionContext.EMPTY)return PredictionContext.EMPTY;var existing=this.cache[ctx]||null;return null!==existing?existing:(this.cache[ctx]=ctx,ctx)},PredictionContextCache.prototype.get=function(ctx){return this.cache[ctx]||null},Object.defineProperty(PredictionContextCache.prototype,"length",{get:function(){return this.cache.length}}),SingletonPredictionContext.prototype=Object.create(PredictionContext.prototype),SingletonPredictionContext.prototype.contructor=SingletonPredictionContext,SingletonPredictionContext.create=function(parent,returnState){return returnState===PredictionContext.EMPTY_RETURN_STATE&&null===parent?PredictionContext.EMPTY:new SingletonPredictionContext(parent,returnState)},Object.defineProperty(SingletonPredictionContext.prototype,"length",{get:function(){return 1}}),SingletonPredictionContext.prototype.getParent=function(index){return this.parentCtx},SingletonPredictionContext.prototype.getReturnState=function(index){return this.returnState},SingletonPredictionContext.prototype.equals=function(other){return this===other||other instanceof SingletonPredictionContext&&(this.hashString()===other.hashString()&&(this.returnState===other.returnState&&(null==this.parentCtx?null==other.parentCtx:this.parentCtx.equals(other.parentCtx))))},SingletonPredictionContext.prototype.hashString=function(){return this.cachedHashString},SingletonPredictionContext.prototype.toString=function(){var up=null===this.parentCtx?"":this.parentCtx.toString();return 0===up.length?this.returnState===this.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+up},EmptyPredictionContext.prototype=Object.create(SingletonPredictionContext.prototype),EmptyPredictionContext.prototype.constructor=EmptyPredictionContext,EmptyPredictionContext.prototype.isEmpty=function(){return!0},EmptyPredictionContext.prototype.getParent=function(index){return null},EmptyPredictionContext.prototype.getReturnState=function(index){return this.returnState},EmptyPredictionContext.prototype.equals=function(other){return this===other},EmptyPredictionContext.prototype.toString=function(){return"$"},PredictionContext.EMPTY=new EmptyPredictionContext,ArrayPredictionContext.prototype=Object.create(PredictionContext.prototype),ArrayPredictionContext.prototype.constructor=ArrayPredictionContext,ArrayPredictionContext.prototype.isEmpty=function(){return this.returnStates[0]===PredictionContext.EMPTY_RETURN_STATE},Object.defineProperty(ArrayPredictionContext.prototype,"length",{get:function(){return this.returnStates.length}}),ArrayPredictionContext.prototype.getParent=function(index){return this.parents[index]},ArrayPredictionContext.prototype.getReturnState=function(index){return this.returnStates[index]},ArrayPredictionContext.prototype.equals=function(other){return this===other||other instanceof ArrayPredictionContext&&(this.hashString===other.hashString()&&(this.returnStates===other.returnStates&&this.parents===other.parents))},ArrayPredictionContext.prototype.toString=function(){if(this.isEmpty())return"[]";for(var s="[",i=0;i<this.returnStates.length;i++)i>0&&(s+=", "),this.returnStates[i]!==PredictionContext.EMPTY_RETURN_STATE?(s+=this.returnStates[i],null!==this.parents[i]?s=s+" "+this.parents[i]:s+="null"):s+="$";return s+"]"},exports.merge=merge,exports.PredictionContext=PredictionContext,exports.PredictionContextCache=PredictionContextCache,exports.SingletonPredictionContext=SingletonPredictionContext,exports.predictionContextFromRuleContext=predictionContextFromRuleContext,exports.getCachedPredictionContext=getCachedPredictionContext;