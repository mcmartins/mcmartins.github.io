<!doctype html>
<html>
<head>
<title>CodeMirror: GAP mode</title>
<meta charset="utf-8"/>
<script src="https://rawgit.com/mcmartins/gap-lint/master/gap-lint.js"></script>
<link rel="stylesheet" href="https://rawgit.com/webgap/CodeMirror/master/doc/docs.css">
<link rel="stylesheet" href="https://rawgit.com/webgap/CodeMirror/master/lib/codemirror.css">
<link rel="stylesheet" href="https://rawgit.com/webgap/CodeMirror/master/theme/dracula.css">
<link rel="stylesheet" href="https://rawgit.com/webgap/CodeMirror/master/addon/lint/lint.css">
</head>
<body>
<script src="https://rawgit.com/webgap/CodeMirror/master/lib/codemirror.js"></script>
<script src="https://rawgit.com/webgap/CodeMirror/master/addon/lint/lint.js"></script>
<script src="https://rawgit.com/webgap/CodeMirror/master/mode/gap/gap.js"></script>
<script src="https://rawgit.com/webgap/CodeMirror/master/addon/lint/gap-lint.js"></script>
<style type="text/css">
    .CodeMirror {
        border-top: 1px solid black;
        border-bottom: 1px solid black;
        height: 530px;
    }
    article {
        max-width: none;
        border-left: 1px solid black;
    }
</style>

<article>
    <h2>GAP mode testing</h2>


<textarea id=code>
# Literals
1234
.123
7
2147483647

(1,2,3)(4,5,6)

"String literals"

"""
Multiline 
string
literals
"""

9123really\w\ eir\_\(identifier := 5;

Sum(List([1..100], x -> x^2));

Group\(2\,5\)

f := function(a,b,c)
local x,y,z,g;

g := Group((1,2,3), (4,5,6));

if IsBound(c[2]) then
while c[2] > 0 do
c[3] := 4 - 2;
od;
fi;
   
if IsGroup(g) then
Error("This is a group!\n");
fi;

x := z{ [1,2,3] };
z := x{ [1..3] };

if a = true then
return x + z;
elif b = 5 then
return b + 2;
else
return a + b + c;
fi;
end;

g := function(x,y)
atomic readwrite x do
x[5] := 2;
od;
end;

</textarea>

    <script>
	// gap-lint loads rules asynchronously from a remote location, this is a workaround
	setTimeout(function(){
	        var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
	            mode: 'gap',
	            lineNumbers: true,
	            matchBrackets: true,
	            gutters: ["CodeMirror-lint-markers"],
	            lint: true,
	            theme: 'dracula'
	        });
	}, 300);
    </script>

    <p><strong>MIME types defined:</strong> <code>text/x-gap</code>.</p>
</article>
</body>
</html>